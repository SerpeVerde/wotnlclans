Vue.component("changeclanmedia",{template:'<div class="changeclanmedia">    <div class="button" v-on:click="show = !show">{{ addtext || "Media toevoegen"}}</div>    <div class="thispopup" v-if="show">      <div class="placeholder">        <div class="titles">          <h1>{{ clan.clandata.clantag }}</h1>          <img :src="clan.clandata.smallimg"/>        </div>        <div class="input">          <p>Afbeelding</p>          <div             :style="{border: hovercss}"             v-on:click="openfiles"             class="fileinputhandeler"             v-on:dragover="uploadimgdragover"             v-on:drop="uploadimgdrop"             v-on:dragleave="uploadimgdragleave">            <svg fill="#000000" height="24" viewBox="0 0 24 24" width="24" xmlns="http://www.w3.org/2000/svg">              <path d="M0 0h24v24H0z" fill="none"/>              <path d="M9 16h6v-6h4l-7-7-7 7h4zm-4 2h14v2H5z"/>            </svg>            <p>Sleep bestanden hier heen </br>of klik op de upload knop</p>          </div>          <input :class="inputid" type=\'file\' accept="image/*" id="imginput" @change="loadFile"/>          <p>Title <span>*niet verplight</span></p>          <input type=\'text\' v-model="doctitle" placeholder="Title"/>          <p>Url <span>*niet verplight</span></p>          <input type=\'text\' v-model="docurl" placeholder="Url"/>          <p class="wrong" v-if="urlerr">Moet een url zijn</p>          <p class="wrong" v-else></p>        </div>        <div class="imgholder">          <p class="textpreview">Preview</p>          <div class="preview" v-bind:style="{\'background-image\':\'url(\' + image + \')\'}">            <p v-if="!urlerr && docurl != \'\'">              <a :href="docurl" target="_blank" :title="docurl">              <svg fill="#ffffff" height="24" viewBox="0 0 24 24" width="24" xmlns="http://www.w3.org/2000/svg">                  <path d="M0 0h24v24H0z" fill="none"/>                  <path d="M3.9 12c0-1.71 1.39-3.1 3.1-3.1h4V7H7c-2.76 0-5 2.24-5 5s2.24 5 5 5h4v-1.9H7c-1.71 0-3.1-1.39-3.1-3.1zM8 13h8v-2H8v2zm9-6h-4v1.9h4c1.71 0 3.1 1.39 3.1 3.1s-1.39 3.1-3.1 3.1h-4V17h4c2.76 0 5-2.24 5-5s-2.24-5-5-5z"/>              </svg>{{ (doctitle != "") ? doctitle : "link" }}</a>            </p>            <p v-else>{{ doctitle }}</p>          </div>        </div>        <div class="submit">          <button v-on:click="close" :disabled="prossessing" class="cancel">Cancel</button>          <button v-on:click="upload" :disabled="prossessing || urlerr || image == \'\' || typeof(sendimg) != \'object\'" class="update">Update</button>        </div>      </div>    </div>  </div>',data:function(){return{hovercss:"2px solid rgb(255,255,255)",image:"",sendimg:"",doctitle:"",docurl:"",urlerr:!1,inputid:"input"+_.sample("ABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789",6).join(""),show:!1,prossessing:!1}},watch:{docurl:function(e){!function(e){var i=document.createElement("a");return i.href=e,i.host&&i.host!=window.location.host}(e)&&""!=e?this.urlerr=!0:this.urlerr=!1}},methods:{close:function(){this.show=!1,this.doctitle="",this.docurl="",this.image="",this.sendimg=""},upload:function(){var e=this;e.prossessing=!0;var i=document.getElementsByClassName(this.inputid)[0],t=new FormData;t.append("file",i.files[0]),t.append("url",this.docurl),t.append("title",this.doctitle),fetch("/submitclammedia/",{mode:"cors",body:t,method:"post",headers:{Cache:"no-cache"},credentials:"same-origin"}).then(function(e){return e.json()}).then(function(i){console.log(i),e.prossessing=!1,i.status?e.close():e.urlerr=!0})},uploadimgdragleave:function(){this.hovercss="2px solid rgb(255,255,255)"},uploadimgdragover:function(e){this.hovercss="2px solid rgb(212,0,255)",e.preventDefault()},uploadimgdrop:function(e){this.hovercss="2px solid rgb(255,255,255)",e.preventDefault();var i=document.getElementsByClassName(this.inputid)[0];i.files=e.dataTransfer.files;var t=i.files;this.createImage(t[0]),this.sendimg=t[0]},loadFile:function(e){var i=e.target.files||e.dataTransfer.files;i.length&&(this.createImage(i[0]),this.sendimg=i[0])},createImage:function(e){new Image;var i=new FileReader,t=this;i.onload=function(e){t.image=e.target.result},i.readAsDataURL(e)},openfiles:function(){document.getElementsByClassName(this.inputid)[0].click()}},props:["clan","addtext"]});