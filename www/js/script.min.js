function progressbar(e){function n(e){procanjoin=!1,requestAnimationFrame(function(){var o=prolenght+e*(proneedl-prolenght);t.style.width=o+"%",e<.9?n(e+.1):(prolenght=Number(t.style.width.replace("%","")),procanjoin=!0,prolenght>98&&removeprogressbar(0))})}var t=document.getElementsByClassName("progress")[0];proneedl=e,procanjoin&&n(0)}function removeprogressbar(e){setTimeout(function(){var n=document.getElementsByClassName("loadingbar")[0];requestAnimationFrame(function(){n.style.top="-"+e/1+"px",e<4&&removeprogressbar(e+1)})},100)}function progressbarreset(){prolenght=0}function createworker(){try{new Worker("/dyjs/worker.js")}catch(e){console.log("webworker not supported on this device"),console.error(e)}}function openclan(e){anime({targets:".clanstatspage",top:"0vh",easing:"easeOutCubic",duration:750});fetch("/claninfo/now/"+e).then(function(e){return e.text()}).then(function(e){e=JSON.parse(e),console.log(e)})}var clandata=[],config={gm:"8",s:"8"},procanjoin=!0,prolenght=0,proneedl=0;progressbar(10);var sitetitle="WOT NL/BE Clans",sitetitle=new Vue({el:".titlebar",data:{sitetitle:sitetitle}}),clanslist=new Vue({el:".clanslist",data:{resize:document.body.clientWidth,items:clandata},methods:{open:function(e){spf.navigate("/clan/"+e),openclan(e)}}}),widthchange=!0;window.addEventListener("resize",function(e){widthchange&&(widthchange=!1,setTimeout(function(){clanslist.resize=document.body.clientWidth,widthchange=!0},300))}),fetch("/clandata-firstload/",{mode:"cors"}).then(function(e){return e.text()}).then(function(e){progressbar(30),e=JSON.parse(e);for(var n=0,t=0;t<e.length;t++){var o=e[t];clandata.push({id:o.i,tag:"["+o.t+"]",win:o.w+"%",rate:o.e,gm:{6:void 0,8:void 0,10:void 0,normal:void 0},s:{6:void 0,8:void 0,10:void 0,normal:void 0},pos:"-"+n+"px 0px",fun:function(e){return config[e]}}),n+=40}fetch("/clandata-load2/",{mode:"cors"}).then(function(e){return e.text()}).then(function(e){progressbar(50),e=JSON.parse(e);for(var n=0;n<e.length;n++){e[n];clandata[n]=Object.assign(clandata[n],e[n])}clanslist.items=clandata;var t=document.getElementsByClassName("listicons"),o=new Image;o.src="/clanicons.png",o.onload=function(e){progressbar(100),setTimeout(function(){function e(n){requestAnimationFrame(function(){function a(e){requestAnimationFrame(function(){t[r].style.opacity=e/70,e<=69&&a(e+1)})}var r=n;t[n].style.backgroundImage='url("'+o.src+'")',a(0),setTimeout(function(){t[n+1]?e(n+1):console.log("dune...")},20)})}e(0)},20)}}).catch(function(e){console.log("Request failed"+e)})}).catch(function(e){console.log("Request failed"+e)}),spf.init(),Vue.component("clanstatspage",{template:"<h1>test</h1>"});var clanstatspage=new Vue({el:".clanstatspage",data:{},methods:{}});