function progressbar(e){function t(e){procanjoin=!1,requestAnimationFrame(function(){var n=prolenght+e*(proneedl-prolenght);a.style.width=n+"%",e<.9?t(e+.1):(prolenght=Number(a.style.width.replace("%","")),procanjoin=!0,prolenght>98&&removeprogressbar(0))})}var a=document.getElementsByClassName("progress")[0];proneedl=e,procanjoin&&t(0)}function removeprogressbar(e){setTimeout(function(){var t=document.getElementsByClassName("loadingbar")[0];requestAnimationFrame(function(){t.style.top="-"+e/1+"px",e<4&&removeprogressbar(e+1)})},100)}function progressbarreset(){prolenght=0}function mkclanlist(){clanslistvue=new Vue({el:".clanslist",data:{resize:document.body.clientWidth,items:clandata},methods:{open:function(e){spf.navigate("/clan/"+e),openclan(e)}}}),getclanlist()}function getclanlist(){fetch("/clandata-firstload/",{mode:"cors"}).then(function(e){return e.text()}).then(function(e){progressbar(30),e=JSON.parse(e);for(var t=0,a=0;a<e.length;a++){var n=e[a];clandata.push({id:n.i,tag:"["+n.t+"]",win:n.w+"%",rate:n.e,gm:{6:void 0,8:void 0,10:void 0,normal:void 0},s:{6:void 0,8:void 0,10:void 0,normal:void 0},pos:"-"+t+"px 0px",fun:function(e){return config[e]}}),t+=40}fetch("/clandata-load2/",{mode:"cors"}).then(function(e){return e.text()}).then(function(e){progressbar(50),MkVueData(),e=JSON.parse(e);for(var t=0;t<e.length;t++){e[t];clandata[t]=Object.assign(clandata[t],e[t])}var a=document.getElementsByClassName("listicons");if(a.length>0){var n=new Image;n.src="/clanicons.png",n.onload=function(e){progressbar(100),setTimeout(function(){function e(l){requestAnimationFrame(function(){function i(e){requestAnimationFrame(function(){a[s].style.opacity=e/o,e<o&&i(e+1)})}var o=70;t>0&&(t-=.5);var s=l;a[l].style.backgroundImage='url("'+n.src+'")',i(0),setTimeout(function(){a[l+1]?e(l+1):(iconsloaded=!0,console.log("dune..."))},t)})}var t=20;e(0)},20)}}}).catch(function(e){console.log("Request failed "+e)})}).catch(function(e){console.log("Request failed "+e)})}function createworker(){try{new Worker("/dyjs/worker.js")}catch(e){console.log("webworker not supported on this device"),console.error(e)}}function openclan(e){MkVueData(),anime({targets:".clanstatspage",top:"0vh",easing:"easeOutCubic",duration:750}),fetch("/claninfo/now/"+e).then(function(e){return e.text()}).then(function(e){e=JSON.parse(e),console.log(e),ClanDetailsClanData.image=e.emblems.x195.portal.replace("http","https"),sitetitle.sitetitle="Clan "+e.clan_tag,sitetitle.backicon=!0,ClanDetailsClanData.clantag="["+e.clan_tag+"]",ClanDetailsClanData.wglink="http://eu.wargaming.net/clans/wot/"+e.clan_id,ClanDetailsClanData.color=e.color,ClanDetailsClanData.win=e.wins_ratio_avg.value,ClanDetailsClanData.eff=e.efficiency.value,ClanDetailsClanData.sh6=e.fb_elo_rating_6.value,ClanDetailsClanData.sh8=e.fb_elo_rating_8.value,ClanDetailsClanData.sh10=e.fb_elo_rating_10.value,ClanDetailsClanData.gm6=e.gm_elo_rating_6.value,ClanDetailsClanData.gm8=e.gm_elo_rating_8.value,ClanDetailsClanData.gm10=e.gm_elo_rating_10.value,ClanDetailsClanData.dis=e.description_html.replace(/'http'/g,"https"),ClanDetailsClanData.leden=e.members_count,ClanDetailsClanData.bgimage="background: -moz-linear-gradient(top, "+e.color+" 0%, rgba(238,238,238,0) 100%);      background: -webkit-linear-gradient(top, "+e.color+" 0%,rgba(238,238,238,0) 100%);      background: linear-gradient(to bottom, "+e.color+" 0%,rgba(238,238,238,0) 100%);      filter: progid:DXImageTransform.Microsoft.gradient( startColorstr='"+e.color+"', endColorstr=#00eeeeee',GradientType=0 );"})}function MkVueData(){PlacedVueData||(PlacedVueData=!0,fetch("/clan/true",{mode:"cors"}).then(function(e){return e.text()}).then(function(e){if(siteurl.includes("/clan/"))new Vue({el:".clanstatspage",data:ClanDetailsClanData});else{Vue.component("clanstatspagecomp",{template:e,data:function(){return ClanDetailsClanData}});new Vue({el:".clanstatspage"})}}))}var clandata=[],iconsloaded=!1,config={gm:"8",s:"8"},procanjoin=!0,prolenght=0,proneedl=0,sitetitlestring="WOT NL/BE Clans",widthchange=!0,lastwidth=1e3,siteurl=document.location.pathname,PlacedVueData=!1;progressbar(10);var sitetitle=new Vue({el:".titlebar",data:{sitetitle:sitetitlestring,backicon:!1}});if(siteurl.includes("/clan/")){var clanpage=document.getElementsByClassName("clanstatspage")[0];clanpage.style.top="0px",sitetitle.backicon=!0,fetch(siteurl.replace("/clan/","/clanname/")).then(function(e){return e.text()}).then(function(e){e=JSON.parse(e),console.log(e),sitetitle.sitetitle="Clan "+e.clan_tag,openclan(e.clan_id.toString())})}else mkclanlist();window.addEventListener("resize",function(e){widthchange&&(widthchange=!1,setTimeout(function(){var e=document.body.clientWidth;if(clanslistvue.resize=e,widthchange=!0,lastwidth<415&&e>415){clanslistvue.items=clanslistvue.items;for(var t=document.getElementsByClassName("listicons"),a=0;a<t.length;a++)t[a].style.backgroundImage="/clanicons.png"}lastwidth=e},300))});var ClanDetailsClanData={image:"",bgimage:"",clantag:"",wglink:"",ts:"sdf",site:"sdf",color:"",win:0,eff:0,sh6:0,sh8:0,sh10:0,gm6:0,gm8:0,gm10:0,dis:"",leden:0};spf.init();