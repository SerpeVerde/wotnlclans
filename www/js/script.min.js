function OpenStatusPopup(){anime({targets:".popup",top:"0vh",easing:"easeOutCubic",duration:750}),(popup=new Vue({el:".popup-center",data:{html:"",open:!1},methods:{outside:function(e){this.open&&(this.open=!1,anime({targets:".popup",top:"100vh",easing:"easeOutCubic",duration:750}))}},directives:{"click-outside":{bind:function(e,t,a){t.value;var n=t.modifiers.bubble,i=function(a){(n||!e.contains(a.target)&&e!==a.target)&&t.value(a)};e.__vueClickOutside__=i,document.addEventListener("click",i)},unbind:function(e,t){document.removeEventListener("click",e.__vueClickOutside__),e.__vueClickOutside__=null}}}})).html='<div class="loading-animation">    <svg class="spinner" width="65px" height="65px" viewBox="0 0 66 66" xmlns="http://www.w3.org/2000/svg">      <circle class="path" fill="none" stroke-width="6" stroke-linecap="round" cx="33" cy="33" r="30"></circle>    </svg>  </div>',setTimeout(function(){popup.open=!0,fetch("/news.html",{mode:"cors",headers:{Cache:"no-cache"}}).then(function(e){return e.text()}).then(function(e){popup.html=e})},100)}function progressbar(e){anime({targets:".loadingbar .progress",width:e+"%",duration:300}),100==e&&anime({targets:".loadingbar",top:"-6px",delay:300,duration:100})}function progressbarreset(){prolenght=0}function backhome(){history.pushState?window.history.pushState({urlPath:"/"},"","/"):document.location.href="/",document.title="Wot NL/BE clans",siteurl.includes("/clan/")&&mkclanlist(),sitetitle.sitetitle="WOT NL/BE Clans",sitetitle.backicon=!1,anime({targets:".clanstatspage",top:"100vh",easing:"easeOutCubic",duration:750})}function mkclanlist(){clanslistvue=new Vue({el:".clanslist",data:{resize:document.body.clientWidth,items:clandata,search:"",img:""},methods:{open:function(e){history.pushState?window.history.pushState({urlPath:"/clan/"+e},"","/clan/"+e):document.location.href="/clan/"+e,openclan(e)},sortby:function(e){this.items[0][e]?this.items=_.sortBy(this.items,e).reverse():(console.log("can't find that key in json"),console.log(this.items[0]))}}}),ResizeEvent(),getclanlist()}function ResizeEvent(){window.addEventListener("resize",function(e){widthchange&&(widthchange=!1,setTimeout(function(){var e=document.body.clientWidth;if(clanslistvue.resize=e,widthchange=!0,lastwidth<415&&e>415){clanslistvue.items=clanslistvue.items;for(var t=document.getElementsByClassName("listicons"),a=0;a<t.length;a++)t[a].style.backgroundImage="/clanicons.png"}lastwidth=e},300))})}function getclanlist(){fetch("/clandata-firstload/",{mode:"cors",headers:{Cache:"no-cache"}}).then(function(e){return e.text()}).then(function(e){progressbar(30),e=JSON.parse(e);for(var t=0,a=0;a<e.length;a++){var n=e[a];clandata.push({id:n.i,tag:"["+n.t+"]",win:n.w+"%",rate:n.e,leden:void 0,gm6:void 0,gm8:void 0,gm10:void 0,gmnormal:void 0,gm:{6:void 0,8:void 0,10:void 0,normal:void 0},s6:void 0,s8:void 0,s10:void 0,snormal:void 0,s:{6:void 0,8:void 0,10:void 0,normal:void 0},pos:"-"+t+"px 0px",fun:function(e){return config[e]}}),t+=40}fetch("/clandata-load2/",{mode:"cors",headers:{Cache:"no-cache"}}).then(function(e){return e.text()}).then(function(e){progressbar(50),MkVueData(),e=JSON.parse(e);for(var t=0;t<e.length;t++){e[t];clandata[t]=Object.assign(clandata[t],e[t]),clandata[t].gm6=clandata[t].gm[6],clandata[t].gm8=clandata[t].gm[8],clandata[t].gm10=clandata[t].gm[10],clandata[t].s6=clandata[t].s[6],clandata[t].s8=clandata[t].s[8],clandata[t].s10=clandata[t].s[10],clandata[t].snormal=clandata[t].s.normal,clandata[t].gmnormal=clandata[t].gm.normal}document.getElementsByClassName("listicons");addclanicons()}).catch(function(e){console.log("Request failed "+e)})}).catch(function(e){console.log("Request failed "+e)})}function addclanicons(){LoadClanMediaSection();var e=document.getElementsByClassName("listicons"),t=new Image;t.src="/clanicons.png",t.onload=function(a){function n(t){requestAnimationFrame(function(){t=Math.round(100*t)/100;for(var a=0;a<e.length;a++)e[a].style.opacity=t;t+t/.01*.01<1?n(t+t/.01*.01):1!==t?n(1):iconsloaded=!0})}progressbar(100),clanslistvue.img='url("'+t.src+'")';for(var i=0;i<e.length;i++)e[i].style.backgroundImage='url("'+t.src+'")',e[i].style.opacity=0;e.length>0&&n(.01)}}function createworker(){try{new Worker("/dyjs/worker.js")}catch(e){console.error(e)}}function openclan(e){MkVueData(),anime({targets:".clanstatspage",top:"0vh",easing:"easeOutCubic",duration:750}),fetch("/claninfo/now/"+e,{headers:{Cache:"no-cache"}}).then(function(e){return e.text()}).then(function(e){e=JSON.parse(e),document.title=e.clan_tag+" | Wot NL/BE clans",ClanDetailsClanData.image=e.emblems.x195.portal.replace("http","https"),sitetitle.sitetitle="Clan "+e.clan_tag,sitetitle.backicon=!0,ClanDetailsClanData.clantag="["+e.clan_tag+"]",ClanDetailsClanData.wglink="http://eu.wargaming.net/clans/wot/"+e.clan_id,ClanDetailsClanData.clan_id=e.clan_id,ClanDetailsClanData.color=e.color,ClanDetailsClanData.win=e.wins_ratio_avg.value,ClanDetailsClanData.eff=e.efficiency.value,ClanDetailsClanData.sh6=e.fb_elo_rating_6.value,ClanDetailsClanData.sh8=e.fb_elo_rating_8.value,ClanDetailsClanData.sh10=e.fb_elo_rating_10.value,ClanDetailsClanData.gm6=e.gm_elo_rating_6.value,ClanDetailsClanData.gm8=e.gm_elo_rating_8.value,ClanDetailsClanData.gm10=e.gm_elo_rating_10.value,ClanDetailsClanData.dis=e.description_html.replace(/'http'/g,"https"),ClanDetailsClanData.leden=e.members_count,ClanDetailsClanData.ts=e.clanteamspeak||"",ClanDetailsClanData.site=e.clansite||"",ClanDetailsClanData.bgimage="background: -moz-linear-gradient(top, "+e.color+" 0%, rgba(238,238,238,0) 100%);      background: -webkit-linear-gradient(top, "+e.color+" 0%,rgba(238,238,238,0) 100%);      background: linear-gradient(to bottom, "+e.color+" 0%,rgba(238,238,238,0) 100%);      filter: progid:DXImageTransform.Microsoft.gradient( startColorstr='"+e.color+"', endColorstr=#00eeeeee',GradientType=0 );"})}function LoadClanMediaSection(){fetch("/mediatemplate",{mode:"cors",headers:{Cache:"no-cache"}}).then(function(e){return e.text()}).then(function(e){header.MediaIsLoaded=!0;var t={};Vue.component("clanmedia",{template:e,data:function(){return t}}),new Vue({el:".clanmedia"})})}function MkVueData(){PlacedVueData||(PlacedVueData=!0,fetch("/clan/true",{mode:"cors",headers:{Cache:"no-cache"}}).then(function(e){return e.text()}).then(function(e){var t={review:function(e){this.reviewcomplete=!1,this.thanksforsubmit="Bedankt voor het beoordelen van deze clan",setTimeout(function(){ClanDetailsClanData.ClansReported[ClanDetailsClanData.clan_id]=!0},3e3),fetch("/reportclan",{method:"post",headers:{Accept:"application/json","Content-Type":"application/json",Cache:"no-cache"},credentials:"same-origin",body:JSON.stringify({report:e,clan:this.clan_id})}).then(function(e){return e.json()}).then(function(e){console.log(e)})}};if(siteurl.includes("/clan/"))new Vue({el:".clanstatspage",data:ClanDetailsClanData,methods:t});else{Vue.component("clanstatspagecomp",{template:e,data:function(){return ClanDetailsClanData},methods:t});new Vue({el:".clanstatspage"})}}))}var clandata=[],iconsloaded=!1,config={gm:"8",s:"8"},procanjoin=!0,prolenght=0,proneedl=0,sitetitlestring="WOT NL/BE Clans",widthchange=!0,lastwidth=1e3,siteurl=document.location.pathname,PlacedVueData=!1,popup=void 0;!function(e,t){"undefined"!=typeof exports?"undefined"!=typeof module&&module.exports&&(exports=module.exports=t(e,exports)):"function"==typeof define&&define.amd?define(["exports"],function(a){e.Lockr=t(e,a)}):e.Lockr=t(e,{})}(this,function(e,t){"use strict";return Array.prototype.indexOf||(Array.prototype.indexOf=function(e){var t=this.length>>>0,a=Number(arguments[1])||0;for((a=a<0?Math.ceil(a):Math.floor(a))<0&&(a+=t);a<t;a++)if(a in this&&this[a]===e)return a;return-1}),t.prefix="",t._getPrefixedKey=function(e,t){return(t=t||{}).noPrefix?e:this.prefix+e},t.set=function(e,t,a){var n=this._getPrefixedKey(e,a);try{localStorage.setItem(n,JSON.stringify({data:t}))}catch(a){console&&console.warn("Lockr didn't successfully save the '{"+e+": "+t+"}' pair, because the localStorage is full.")}},t.get=function(e,t,a){var n,i=this._getPrefixedKey(e,a);try{n=JSON.parse(localStorage.getItem(i))}catch(e){n=localStorage[i]?{data:localStorage.getItem(i)}:null}return null===n?t:"object"==typeof n&&void 0!==n.data?n.data:t},t.sadd=function(e,a,n){var i,o=this._getPrefixedKey(e,n),l=t.smembers(e);if(l.indexOf(a)>-1)return null;try{l.push(a),i=JSON.stringify({data:l}),localStorage.setItem(o,i)}catch(t){console.log(t),console&&console.warn("Lockr didn't successfully add the "+a+" to "+e+" set, because the localStorage is full.")}},t.smembers=function(e,t){var a,n=this._getPrefixedKey(e,t);try{a=JSON.parse(localStorage.getItem(n))}catch(e){a=null}return null===a?[]:a.data||[]},t.sismember=function(e,a,n){return t.smembers(e).indexOf(a)>-1},t.keys=function(){var e=[],a=Object.keys(localStorage);return 0===t.prefix.length?a:(a.forEach(function(a){-1!==a.indexOf(t.prefix)&&e.push(a.replace(t.prefix,""))}),e)},t.getAll=function(e){var a=t.keys();return e?a.reduce(function(e,a){var n={};return n[a]=t.get(a),e.push(n),e},[]):a.map(function(e){return t.get(e)})},t.srem=function(e,a,n){var i,o,l=this._getPrefixedKey(e,n),s=t.smembers(e,a);(o=s.indexOf(a))>-1&&s.splice(o,1),i=JSON.stringify({data:s});try{localStorage.setItem(l,i)}catch(t){console&&console.warn("Lockr couldn't remove the "+a+" from the set "+e)}},t.rm=function(e){var t=this._getPrefixedKey(e);localStorage.removeItem(t)},t.flush=function(){t.prefix.length?t.keys().forEach(function(e){localStorage.removeItem(t._getPrefixedKey(e))}):localStorage.clear()},t});var ClanDetailsClanData={login:-1!==document.cookie.indexOf("logedin=true"),reviewcomplete:!0,thanksforsubmit:"",image:"",bgimage:"",clantag:"",wglink:"",ts:"sdf",site:"sdf",color:"",win:1,eff:1,sh6:1,sh8:1,sh10:1,gm6:1,gm8:1,gm10:1,dis:"",leden:1,clan_id:1,CanReportClans:!1,ClansReported:{}};window.addEventListener("popstate",function(e){e.state.urlPath&&"/"!=e.state.urlPath||backhome()});var header=new Vue({el:".header",data:{nothidden:Lockr.get("settingsopen")||!1,clanwebsite:"",clanteamspeak:"",caneddit:!0,SaveStatus:"",Sorting:"rate",SettingsGM:"8",SettingsS:"8",search:"",displaystats:!0,MediaIsLoaded:!1},watch:{search:function(e,t){clanslistvue.search=e}},methods:{ViewSettings:function(e){this.nothidden=!this.nothidden,Lockr.set("settingsopen",!e),e||this.check()},SetGM:function(e){config.gm=e,this.SettingsGM=e;for(var t=0;t<clanslistvue.items.length;t++)clanslistvue.items[t].fun=function(e){return config[e]};"gm"==this.Sorting&&clanslistvue.sortby("gm"+e)},SetS:function(e){config.s=e,this.SettingsS=e;for(var t=0;t<clanslistvue.items.length;t++)clanslistvue.items[t].fun=function(e){return config[e]};"s"==this.Sorting&&clanslistvue.sortby("s"+e)},SortClans:function(e){"gm"==e||"s"==e?clanslistvue.sortby(e+this["Settings"+e.toUpperCase()]):clanslistvue.sortby(e),this.Sorting=e},status:function(){OpenStatusPopup()},focus:function(e){var t=document.getElementsByClassName(e)[0];t.style.top="-16px",t.style.fontSize="16px",t.style.color="rgba(212, 0, 255, 1)"},blur:function(e){var t=document.getElementsByClassName(e)[0];""==document.getElementById(e.replace("-label","")).value&&(t.style.top="14px",t.style.fontSize="19px",t.style.color="rgba(212, 0, 255, 0.65)")},check:function(e){function t(e){setTimeout(function(){if(document.getElementById(e.replace("-label",""))&&document.getElementById(e.replace("-label","")).value.length>0){var t=document.getElementsByClassName(e)[0];t.style.top="-16px",t.style.fontSize="16px",t.style.color="rgba(212, 0, 255, 1)"}},700)}e?t(e):(t("clanwebsite-label"),t("clanteamspeak-label"),t("search-label"))},save:function(){header.caneddit=!0,header.SaveStatus="opslaan...",fetch("/submitclandata",{method:"post",headers:{Accept:"application/json","Content-Type":"application/json",Cache:"no-cache"},credentials:"same-origin",body:JSON.stringify({clansite:this.clanwebsite,clanteamspeak:this.clanteamspeak})}).then(function(e){return e.json()}).then(function(e){e.status?(header.SaveStatus="opgelagen",setTimeout(function(){header.SaveStatus=""},1e3)):(header.SaveStatus="Data ongeldig",setTimeout(function(){header.SaveStatus=""},2e3)),header.caneddit=!1})}},created:function(){-1!==document.cookie.indexOf("logedin=true")&&(this.check(),fetch("/rules",{method:"post",headers:{Accept:"application/json","Content-Type":"application/json",Cache:"no-cache"},credentials:"same-origin"}).then(function(e){return e.json()}).then(function(e){if(e.status&&e.clan&&e.edditclandata&&(header.caneddit=!1,header.clanwebsite=e.claninfo.clansite,header.clanteamspeak=e.claninfo.clanteamspeak),e.reports){var t=e.reports;if(t.block||(ClanDetailsClanData.CanReportClans=!0),t.reportclans)for(var a=0;a<t.reportclans.length;a++)ClanDetailsClanData.ClansReported[t.reportclans[a].clanid]=!0}}))}});siteurl.includes("/clan/")||progressbar(10);var sitetitle=new Vue({el:".titlebar",data:{sitetitle:sitetitlestring,backicon:!1},methods:{openstart:function(){backhome()}}});if(siteurl.includes("/clan/")){var clanpage=document.getElementsByClassName("clanstatspage")[0];clanpage.style.top="0px",sitetitle.backicon=!0,fetch(siteurl.replace("/clan/","/clanname/"),{headers:{Cache:"no-cache"}}).then(function(e){return e.text()}).then(function(e){e=JSON.parse(e),sitetitle.sitetitle="Clan "+e.clan_tag,document.title=e.clan_tag+" | Wot NL/BE clans",openclan(e.clan_id.toString())})}else mkclanlist();