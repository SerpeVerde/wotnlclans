function progressbar(e){function t(e){procanjoin=!1,requestAnimationFrame(function(){var a=prolenght+e*(proneedl-prolenght);n.style.width=a+"%",e<.9?t(e+.1):(prolenght=Number(n.style.width.replace("%","")),procanjoin=!0,prolenght>98&&removeprogressbar(0))})}var n=document.getElementsByClassName("progress")[0];proneedl=e,procanjoin&&t(0)}function removeprogressbar(e){setTimeout(function(){var t=document.getElementsByClassName("loadingbar")[0];requestAnimationFrame(function(){t.style.top="-"+e/1+"px",e<4&&removeprogressbar(e+1)})},100)}function progressbarreset(){prolenght=0}function mkclanlist(){clanslistvue=new Vue({el:".clanslist",data:{resize:document.body.clientWidth,items:clandata},methods:{open:function(e){spf.navigate("/clan/"+e),openclan(e)}}}),getclanlist()}function getclanlist(){fetch("/clandata-firstload/",{mode:"cors"}).then(function(e){return e.text()}).then(function(e){progressbar(30),e=JSON.parse(e);for(var t=0,n=0;n<e.length;n++){var a=e[n];clandata.push({id:a.i,tag:"["+a.t+"]",win:a.w+"%",rate:a.e,gm:{6:void 0,8:void 0,10:void 0,normal:void 0},s:{6:void 0,8:void 0,10:void 0,normal:void 0},pos:"-"+t+"px 0px",fun:function(e){return config[e]}}),t+=40}fetch("/clandata-load2/",{mode:"cors"}).then(function(e){return e.text()}).then(function(e){progressbar(50),MkVueData(),e=JSON.parse(e);for(var t=0;t<e.length;t++){e[t];clandata[t]=Object.assign(clandata[t],e[t])}var n=document.getElementsByClassName("listicons");if(n.length>0){var a=new Image;a.src="/clanicons.png",a.onload=function(e){progressbar(100),setTimeout(function(){function e(o){requestAnimationFrame(function(){function i(e){requestAnimationFrame(function(){n[s].style.opacity=e/l,e<l&&i(e+1)})}var l=70;t>0&&(t-=.5);var s=o;n[o].style.backgroundImage='url("'+a.src+'")',i(0),setTimeout(function(){n[o+1]?e(o+1):(iconsloaded=!0,console.log("dune..."))},t)})}var t=20;e(0)},20)}}}).catch(function(e){console.log("Request failed "+e)})}).catch(function(e){console.log("Request failed "+e)})}function createworker(){try{new Worker("/dyjs/worker.js")}catch(e){console.log("webworker not supported on this device"),console.error(e)}}function openclan(e){MkVueData(),anime({targets:".clanstatspage",top:"0vh",easing:"easeOutCubic",duration:750}),fetch("/claninfo/now/"+e).then(function(e){return e.text()}).then(function(e){e=JSON.parse(e),console.log(e),ClanDetailsClanData.image=e.emblems.x195.portal,ClanDetailsClanData.bgimage='url("'+e.emblems.x24.portal+'")',sitetitle.sitetitle="Clan "+e.clan_tag,sitetitle.backicon=!0})}function MkVueData(){PlacedVueData||(PlacedVueData=!0,fetch("/clan/true",{mode:"cors"}).then(function(e){return e.text()}).then(function(e){if(siteurl.includes("/clan/"))new Vue({el:".clanstatspage",data:ClanDetailsClanData});else{Vue.component("clanstatspagecomp",{template:e,data:function(){return ClanDetailsClanData}});new Vue({el:".clanstatspage"})}}))}var clandata=[],iconsloaded=!1,config={gm:"8",s:"8"},procanjoin=!0,prolenght=0,proneedl=0,sitetitlestring="WOT NL/BE Clans",widthchange=!0,lastwidth=1e3,siteurl=document.location.pathname,PlacedVueData=!1;progressbar(10);var sitetitle=new Vue({el:".titlebar",data:{sitetitle:sitetitlestring,backicon:!1}});if(siteurl.includes("/clan/")){var clanpage=document.getElementsByClassName("clanstatspage")[0];clanpage.style.top="0px",sitetitle.backicon=!0,fetch(siteurl.replace("/clan/","/clanname/")).then(function(e){return e.text()}).then(function(e){e=JSON.parse(e),console.log(e),sitetitle.sitetitle="Clan "+e.clan_tag,openclan(e.clan_id.toString())})}else mkclanlist();window.addEventListener("resize",function(e){widthchange&&(widthchange=!1,setTimeout(function(){var e=document.body.clientWidth;if(clanslistvue.resize=e,widthchange=!0,lastwidth<415&&e>415){clanslistvue.items=clanslistvue.items;for(var t=document.getElementsByClassName("listicons"),n=0;n<t.length;n++)t[n].style.backgroundImage="/clanicons.png"}lastwidth=e},300))});var ClanDetailsClanData={image:"",bgimage:""};spf.init();