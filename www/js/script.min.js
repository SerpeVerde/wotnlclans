function OpenStatusPopup(){anime({targets:".popup",top:"0vh",easing:"easeOutCubic",duration:750}),(popup=new Vue({el:".popup-center",data:{html:"",open:!1},methods:{outside:function(t){this.open&&(this.open=!1,anime({targets:".popup",top:"100vh",easing:"easeOutCubic",duration:750}))}},directives:{"click-outside":{bind:function(t,e,a){e.value;var n=e.modifiers.bubble,l=function(a){(n||!t.contains(a.target)&&t!==a.target)&&e.value(a)};t.__vueClickOutside__=l,document.addEventListener("click",l)},unbind:function(t,e){document.removeEventListener("click",t.__vueClickOutside__),t.__vueClickOutside__=null}}}})).html='<div class="loading-animation">    <svg class="spinner" width="65px" height="65px" viewBox="0 0 66 66" xmlns="http://www.w3.org/2000/svg">      <circle class="path" fill="none" stroke-width="6" stroke-linecap="round" cx="33" cy="33" r="30"></circle>    </svg>  </div>',setTimeout(function(){popup.open=!0,fetch("/news.html",{mode:"cors",headers:{Cache:"no-cache"}}).then(function(t){return t.text()}).then(function(t){popup.html=t})},100)}function progressbar(t){console.log(t),anime({targets:".loadingbar .progress",width:t+"%",duration:300}),100==t&&anime({targets:".loadingbar",top:"-6px",delay:300,duration:100})}function progressbarreset(){prolenght=0}function backhome(){history.pushState?window.history.pushState({urlPath:"/"},"","/"):document.location.href="/",document.title="Wot NL/BE clans",siteurl.includes("/clan/")&&mkclanlist(),sitetitle.sitetitle="WOT NL/BE Clans",sitetitle.backicon=!1,anime({targets:".clanstatspage",top:"100vh",easing:"easeOutCubic",duration:750})}function mkclanlist(){clanslistvue=new Vue({el:".clanslist",data:{resize:document.body.clientWidth,items:clandata},methods:{open:function(t){history.pushState?window.history.pushState({urlPath:"/clan/"+t},"","/clan/"+t):document.location.href="/clan/"+t,openclan(t)},sortby:function(t){this.items[0][t]?this.items=_.sortBy(this.items,t).reverse():(console.log("can't find that key in json"),console.log(this.items[0]))}}}),ResizeEvent(),getclanlist()}function ResizeEvent(){window.addEventListener("resize",function(t){widthchange&&(widthchange=!1,setTimeout(function(){var t=document.body.clientWidth;if(clanslistvue.resize=t,widthchange=!0,lastwidth<415&&t>415){clanslistvue.items=clanslistvue.items;for(var e=document.getElementsByClassName("listicons"),a=0;a<e.length;a++)e[a].style.backgroundImage="/clanicons.png"}lastwidth=t},300))})}function getclanlist(){fetch("/clandata-firstload/",{mode:"cors",headers:{Cache:"no-cache"}}).then(function(t){return t.text()}).then(function(t){progressbar(30),t=JSON.parse(t);for(var e=0,a=0;a<t.length;a++){var n=t[a];clandata.push({id:n.i,tag:"["+n.t+"]",win:n.w+"%",rate:n.e,leden:void 0,gm6:void 0,gm8:void 0,gm10:void 0,gmnormal:void 0,gm:{6:void 0,8:void 0,10:void 0,normal:void 0},s6:void 0,s8:void 0,s10:void 0,snormal:void 0,s:{6:void 0,8:void 0,10:void 0,normal:void 0},pos:"-"+e+"px 0px",fun:function(t){return config[t]}}),e+=40}fetch("/clandata-load2/",{mode:"cors",headers:{Cache:"no-cache"}}).then(function(t){return t.text()}).then(function(t){progressbar(50),MkVueData(),t=JSON.parse(t);for(var e=0;e<t.length;e++){t[e];clandata[e]=Object.assign(clandata[e],t[e]),clandata[e].gm6=clandata[e].gm[6],clandata[e].gm8=clandata[e].gm[8],clandata[e].gm10=clandata[e].gm[10],clandata[e].s6=clandata[e].s[6],clandata[e].s8=clandata[e].s[8],clandata[e].s10=clandata[e].s[10],clandata[e].snormal=clandata[e].s.normal,clandata[e].gmnormal=clandata[e].gm.normal}document.getElementsByClassName("listicons").length>0?addclanicons():progressbar(100)}).catch(function(t){console.log("Request failed "+t)})}).catch(function(t){console.log("Request failed "+t)})}function addclanicons(){var t=document.getElementsByClassName("listicons"),e=new Image;e.src="/clanicons.png",e.onload=function(a){function n(e){requestAnimationFrame(function(){e=Math.round(100*e)/100;for(var a=0;a<t.length;a++)t[a].style.opacity=e;e+e/.01*.01<1?n(e+e/.01*.01):1!==e?n(1):(console.log("dune loading icons"),iconsloaded=!0)})}progressbar(100);for(var l=0;l<t.length;l++)t[l].style.backgroundImage='url("'+e.src+'")',t[l].style.opacity=0;n(.01)}}function createworker(){try{new Worker("/dyjs/worker.js")}catch(t){console.error(t)}}function openclan(t){MkVueData(),anime({targets:".clanstatspage",top:"0vh",easing:"easeOutCubic",duration:750}),fetch("/claninfo/now/"+t,{headers:{Cache:"no-cache"}}).then(function(t){return t.text()}).then(function(t){t=JSON.parse(t),document.title=t.clan_tag+" | Wot NL/BE clans",ClanDetailsClanData.image=t.emblems.x195.portal.replace("http","https"),sitetitle.sitetitle="Clan "+t.clan_tag,sitetitle.backicon=!0,ClanDetailsClanData.clantag="["+t.clan_tag+"]",ClanDetailsClanData.wglink="http://eu.wargaming.net/clans/wot/"+t.clan_id,ClanDetailsClanData.clan_id=t.clan_id,ClanDetailsClanData.color=t.color,ClanDetailsClanData.win=t.wins_ratio_avg.value,ClanDetailsClanData.eff=t.efficiency.value,ClanDetailsClanData.sh6=t.fb_elo_rating_6.value,ClanDetailsClanData.sh8=t.fb_elo_rating_8.value,ClanDetailsClanData.sh10=t.fb_elo_rating_10.value,ClanDetailsClanData.gm6=t.gm_elo_rating_6.value,ClanDetailsClanData.gm8=t.gm_elo_rating_8.value,ClanDetailsClanData.gm10=t.gm_elo_rating_10.value,ClanDetailsClanData.dis=t.description_html.replace(/'http'/g,"https"),ClanDetailsClanData.leden=t.members_count,ClanDetailsClanData.ts=t.clanteamspeak||"",ClanDetailsClanData.site=t.clansite||"",ClanDetailsClanData.bgimage="background: -moz-linear-gradient(top, "+t.color+" 0%, rgba(238,238,238,0) 100%);      background: -webkit-linear-gradient(top, "+t.color+" 0%,rgba(238,238,238,0) 100%);      background: linear-gradient(to bottom, "+t.color+" 0%,rgba(238,238,238,0) 100%);      filter: progid:DXImageTransform.Microsoft.gradient( startColorstr='"+t.color+"', endColorstr=#00eeeeee',GradientType=0 );"})}function MkVueData(){PlacedVueData||(PlacedVueData=!0,fetch("/clan/true",{mode:"cors",headers:{Cache:"no-cache"}}).then(function(t){return t.text()}).then(function(t){var e={review:function(t){this.reviewcomplete=!1,this.thanksforsubmit="Bedankt voor het beoordelen van deze clan",setTimeout(function(){ClanDetailsClanData.ClansReported[ClanDetailsClanData.clan_id]=!0},3e3),fetch("/reportclan",{method:"post",headers:{Accept:"application/json","Content-Type":"application/json",Cache:"no-cache"},credentials:"same-origin",body:JSON.stringify({report:t,clan:this.clan_id})}).then(function(t){return t.json()}).then(function(t){console.log(t)})}};if(siteurl.includes("/clan/"))new Vue({el:".clanstatspage",data:ClanDetailsClanData,methods:e});else{Vue.component("clanstatspagecomp",{template:t,data:function(){return ClanDetailsClanData},methods:e});new Vue({el:".clanstatspage"})}}))}var clandata=[],iconsloaded=!1,config={gm:"8",s:"8"},procanjoin=!0,prolenght=0,proneedl=0,sitetitlestring="WOT NL/BE Clans",widthchange=!0,lastwidth=1e3,siteurl=document.location.pathname,PlacedVueData=!1,popup=void 0,ClanDetailsClanData={login:-1!==document.cookie.indexOf("logedin=true"),reviewcomplete:!0,thanksforsubmit:"",image:"",bgimage:"",clantag:"",wglink:"",ts:"sdf",site:"sdf",color:"",win:1,eff:1,sh6:1,sh8:1,sh10:1,gm6:1,gm8:1,gm10:1,dis:"",leden:1,clan_id:1,CanReportClans:!1,ClansReported:{}};window.addEventListener("popstate",function(t){t.state.urlPath&&"/"!=t.state.urlPath||backhome()});var header=new Vue({el:".header",data:{clanwebsite:"",clanteamspeak:"",caneddit:!0,SaveStatus:"",Sorting:"rate",SettingsGM:"8",SettingsS:"8"},methods:{SetGM:function(t){config.gm=t,this.SettingsGM=t;for(var e=0;e<clanslistvue.items.length;e++)clanslistvue.items[e].fun=function(t){return config[t]};"gm"==this.Sorting&&clanslistvue.sortby("gm"+t)},SetS:function(t){config.s=t,this.SettingsS=t;for(var e=0;e<clanslistvue.items.length;e++)clanslistvue.items[e].fun=function(t){return config[t]};"s"==this.Sorting&&clanslistvue.sortby("s"+t)},SortClans:function(t){"gm"==t||"s"==t?clanslistvue.sortby(t+this["Settings"+t.toUpperCase()]):clanslistvue.sortby(t),this.Sorting=t},status:function(){OpenStatusPopup()},focus:function(t){var e=document.getElementsByClassName(t)[0];e.style.top="-16px",e.style.fontSize="16px",e.style.color="rgba(212, 0, 255, 1)"},blur:function(t){var e=document.getElementsByClassName(t)[0];""==document.getElementById(t.replace("-label","")).value&&(e.style.top="14px",e.style.fontSize="19px",e.style.color="rgba(212, 0, 255, 0.65)")},check:function(t){setTimeout(function(){if(document.getElementById(t.replace("-label",""))&&document.getElementById(t.replace("-label","")).value.length>0){var e=document.getElementsByClassName(t)[0];e.style.top="-16px",e.style.fontSize="16px",e.style.color="rgba(212, 0, 255, 1)"}},1e3)},save:function(){header.caneddit=!0,header.SaveStatus="opslaan...",fetch("/submitclandata",{method:"post",headers:{Accept:"application/json","Content-Type":"application/json",Cache:"no-cache"},credentials:"same-origin",body:JSON.stringify({clansite:this.clanwebsite,clanteamspeak:this.clanteamspeak})}).then(function(t){return t.json()}).then(function(t){t.status?(header.SaveStatus="opgelagen",setTimeout(function(){header.SaveStatus=""},1e3)):(header.SaveStatus="Data ongeldig",setTimeout(function(){header.SaveStatus=""},2e3)),header.caneddit=!1})}},created:function(){-1!==document.cookie.indexOf("logedin=true")&&(this.check("clanwebsite-label"),this.check("clanteamspeak-label"),fetch("/rules",{method:"post",headers:{Accept:"application/json","Content-Type":"application/json",Cache:"no-cache"},credentials:"same-origin"}).then(function(t){return t.json()}).then(function(t){if(t.status&&t.clan&&t.edditclandata&&(header.caneddit=!1,header.clanwebsite=t.claninfo.clansite,header.clanteamspeak=t.claninfo.clanteamspeak),t.reports){var e=t.reports;if(e.block||(ClanDetailsClanData.CanReportClans=!0),e.reportclans)for(var a=0;a<e.reportclans.length;a++)ClanDetailsClanData.ClansReported[e.reportclans[a].clanid]=!0}}))}});siteurl.includes("/clan/")||progressbar(10);var sitetitle=new Vue({el:".titlebar",data:{sitetitle:sitetitlestring,backicon:!1},methods:{openstart:function(){backhome()}}});if(siteurl.includes("/clan/")){var clanpage=document.getElementsByClassName("clanstatspage")[0];clanpage.style.top="0px",sitetitle.backicon=!0,fetch(siteurl.replace("/clan/","/clanname/"),{headers:{Cache:"no-cache"}}).then(function(t){return t.text()}).then(function(t){t=JSON.parse(t),sitetitle.sitetitle="Clan "+t.clan_tag,document.title=t.clan_tag+" | Wot NL/BE clans",openclan(t.clan_id.toString())})}else mkclanlist();